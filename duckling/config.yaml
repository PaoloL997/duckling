models:
  llm: gpt-4.1-nano
  tokenizer: sentence-transformers/all-MiniLM-L6-v2

prompts:
  retrive_image_description: |
    You are given the following markdown content extracted from a PDF document. 
    Your task is to analyze ALL images present in the markdown and determine their relevance.

    For each image found, create a JSON object with the following fields:
    - "path": the full path or URL of the image as it appears in the markdown
    - "name": the name or identifier used to reference this image in the text (e.g., "Figure 1", "Schema A", etc.) or "Generic" if no specific reference
    - "description": a detailed explanation of what the image represents based on its context
    - "relevant": boolean - true if the image has specific textual reference (Figure 1, Diagram A, Table 2, etc.), false if it's decorative/generic/logo/unreferenced

    RELEVANCE CRITERIA (relevant: true):
    - Image is specifically mentioned by name/number in the text (e.g., "Figure 1", "Diagram A", "Schema B", "Table 2")
    - Image is directly referenced (e.g., "see Figure X", "as shown in", "the diagram below")

    NOT RELEVANT (relevant: false):
    - Logos, icons, watermarks, decorative elements
    - Images with only generic references like "Image", "Picture"
    - Images not mentioned in the surrounding text
    - Header/footer graphics

    IMPORTANT: Include ALL images but mark their relevance correctly.

    Markdown content:
    {markdown_content}

  describe_image: |
    Describe the image in detail. Explain what is visible, including the main subjects, their surroundings, and any relevant actions, 
    objects, or features. Mention colors, composition, and general atmosphere if noticeable. If any measurements, dimensions, scale
    indicators, abbreviations, symbols, numbers, or text appear in the image, include them accurately in the description. Focus on
    providing a clear, precise, and complete account of everything observable in the image.

  image_refinement: |
    You are analyzing a technical image that was already identified as relevant to a document.

    Given this description: "{description}"

    Examine the attached image very carefully and determine if it contains meaningful VISUAL technical content:

    RETURN FALSE if the image is:
    - A simple logo, company branding, or watermark
    - Pure text tables or specifications without visual elements
    - Text headers, titles, or labels without diagrams
    - Simple boxes with only text content
    - Decorative borders or graphic elements
    - Screenshots of text without visual information
    - Completely blank or uninformative

    RETURN ENRICHED DESCRIPTION ONLY if the image contains ACTUAL VISUAL technical content:
    - Technical diagrams, schematics, engineering drawings
    - Visual charts, graphs, or data plots
    - Photographs of physical equipment, materials, specimens
    - Structural drawings with visual geometry and measurements
    - Test setups showing physical arrangements
    - Visual illustrations that convey information beyond text

    Be STRICT: If the image is primarily text-based (tables, specifications, labels) without meaningful visual elements, return FALSE.

    If the image contains genuine visual technical information, expand the description with:
    - Visual elements, shapes, structures shown
    - Measurements, dimensions, or scale indicators visible in the image
    - Technical symbols, arrows, or visual annotations
    - Physical relationships and spatial arrangements
    - Colors, materials, or textures that convey technical information

    Return either "False" or the expanded visual description.
